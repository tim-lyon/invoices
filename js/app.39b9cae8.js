(function(e){function t(t){for(var i,l,a=t[0],r=t[1],u=t[2],s=0,b=[];s<a.length;s++)l=a[s],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&b.push(c[l][0]),c[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==c[r]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},c={app:0},o=[];function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var d=r;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03c0":function(e,t,n){"use strict";n("cf19")},"3cd6":function(e,t,n){},5454:function(e,t,n){"use strict";n("d437")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7864"),c=(n("3cd6"),n("7a23")),o={id:"app"},l={key:0,style:{height:"100%"}},a=Object(c["o"])("i",{class:"el-icon-back"},null,-1),r=Object(c["n"])(" Sign out "),u=Object(c["o"])("i",{class:"el-icon-setting"},null,-1),d=Object(c["n"])(" Settings "),s=Object(c["o"])("i",{class:"el-icon-user"},null,-1),b=Object(c["n"])(" Clients "),f=Object(c["o"])("i",{class:"el-icon-tickets"},null,-1),O=Object(c["n"])(" Invoices "),j=Object(c["o"])("i",{class:"el-icon-copy-document"},null,-1),p=Object(c["n"])(" Copy data "),m={key:1},h=Object(c["n"])(" Hello! "),v=Object(c["o"])("br",null,null,-1),g=Object(c["n"])(" To start making invoices, sign in with Google Drive "),y=Object(c["o"])("br",null,null,-1),C=Object(c["n"])("Sign in");function k(e,t,n,i,k,w){var V=Object(c["O"])("el-menu-item"),I=Object(c["O"])("el-menu"),S=Object(c["O"])("el-aside"),_=Object(c["O"])("invoice-settings"),D=Object(c["O"])("invoice-clients"),x=Object(c["O"])("invoices"),F=Object(c["O"])("el-container"),N=Object(c["O"])("el-main"),U=Object(c["O"])("printable-invoice"),P=Object(c["O"])("el-button");return Object(c["F"])(),Object(c["k"])("div",o,[k.isSignedIn?(Object(c["F"])(),Object(c["k"])("div",l,[Object(c["o"])(F,{style:{height:"100%"}},{default:Object(c["db"])((function(){return[Object(c["o"])(N,{class:"app",style:{padding:"0",height:"100%"}},{default:Object(c["db"])((function(){return[Object(c["o"])(F,{style:{height:"100%"}},{default:Object(c["db"])((function(){return[Object(c["o"])(S,{width:"200px",style:{height:"100%"}},{default:Object(c["db"])((function(){return[Object(c["o"])(I,{"default-active":"3",style:{height:"100%"}},{default:Object(c["db"])((function(){return[Object(c["o"])(V,{onClick:w.signout,index:"4"},{default:Object(c["db"])((function(){return[a,r]})),_:1},8,["onClick"]),Object(c["o"])(V,{onClick:t[1]||(t[1]=function(e){return k.navSection="settings"}),index:"1"},{default:Object(c["db"])((function(){return[u,d]})),_:1}),Object(c["o"])(V,{onClick:t[2]||(t[2]=function(e){return k.navSection="clients"}),index:"2"},{default:Object(c["db"])((function(){return[s,b]})),_:1}),Object(c["o"])(V,{onClick:t[3]||(t[3]=function(e){return k.navSection="invoices"}),index:"3"},{default:Object(c["db"])((function(){return[f,O]})),_:1}),Object(c["o"])(V,{onClick:w.copyData,index:"5"},{default:Object(c["db"])((function(){return[j,p]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(c["o"])(F,null,{default:Object(c["db"])((function(){return["settings"===k.navSection?(Object(c["F"])(),Object(c["k"])(_,{key:0,state:k.state},null,8,["state"])):Object(c["l"])("",!0),"clients"===k.navSection?(Object(c["F"])(),Object(c["k"])(D,{key:1,onSaveClient:w.saveClient,onDeleteClient:w.deleteClient,state:k.state},null,8,["onSaveClient","onDeleteClient","state"])):Object(c["l"])("",!0),"invoices"===k.navSection?(Object(c["F"])(),Object(c["k"])(x,{key:2,onSaveInvoice:w.saveInvoice,onDeleteInvoice:w.deleteInvoice,onPrintInvoice:w.print,state:k.state},null,8,["onSaveInvoice","onDeleteInvoice","onPrintInvoice","state"])):Object(c["l"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(c["o"])(U,{state:k.state,invoice:k.printInvoice},null,8,["state","invoice"])])):(Object(c["F"])(),Object(c["k"])("div",m,[Object(c["o"])(F,null,{default:Object(c["db"])((function(){return[Object(c["o"])(N,{style:{"margin-top":"60px","text-align":"center",color:"#ccc","line-height":"3em"}},{default:Object(c["db"])((function(){return[h,v,g,y,Object(c["o"])(P,{onClick:w.signin},{default:Object(c["db"])((function(){return[C]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]))])}var w=n("bee2"),V=n("d4ec"),I=(n("e9c4"),n("c740"),n("a434"),n("b0c0"),Object(c["hb"])("data-v-43609eaa"));Object(c["I"])("data-v-43609eaa");var S=Object(c["o"])("div",{class:"card-header"},[Object(c["o"])("span",null,"Business details")],-1),_=Object(c["o"])("div",{class:"card-header"},[Object(c["o"])("span",null,"Payment details")],-1);Object(c["G"])();var D=I((function(e,t,n,i,o,l){var a=Object(c["O"])("el-input"),r=Object(c["O"])("el-form-item"),u=Object(c["O"])("el-form"),d=Object(c["O"])("el-card"),s=Object(c["O"])("el-main");return Object(c["F"])(),Object(c["k"])(s,null,{default:I((function(){return[Object(c["o"])(d,{class:"box-card"},{header:I((function(){return[S]})),default:I((function(){return[Object(c["o"])(u,{"label-width":"120px"},{default:I((function(){return[Object(c["o"])(r,{label:"Name"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.settings.name=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Business name"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.businessName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.settings.businessName=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Address"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.settings.address=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Email"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.settings.email=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Phone"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.phone,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.settings.phone=e})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(c["o"])(d,{class:"box-card"},{header:I((function(){return[_]})),default:I((function(){return[Object(c["o"])(u,{"label-width":"120px"},{default:I((function(){return[Object(c["o"])(r,{label:"Name"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.paymentDetails.name,"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.settings.paymentDetails.name=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Sort code"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.paymentDetails.sortCode,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.settings.paymentDetails.sortCode=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Account number"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.paymentDetails.accountNumber,"onUpdate:modelValue":t[8]||(t[8]=function(e){return l.settings.paymentDetails.accountNumber=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"IBAN"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.paymentDetails.iban,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.settings.paymentDetails.iban=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(r,{label:"Swift"},{default:I((function(){return[Object(c["o"])(a,{modelValue:l.settings.paymentDetails.swift,"onUpdate:modelValue":t[10]||(t[10]=function(e){return l.settings.paymentDetails.swift=e})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),x={name:"InvoiceSettings",props:{state:Object},computed:{settings:function(){return this.state.settings}}};n("c632");x.render=D,x.__scopeId="data-v-43609eaa";var F=x,N=(n("ac1f"),n("841c"),Object(c["hb"])("data-v-bfbacdd4"));Object(c["I"])("data-v-bfbacdd4");var U=Object(c["n"])("New client"),P={class:"dialog-footer"},T=Object(c["n"])("Cancel"),E=Object(c["n"])("Confirm");Object(c["G"])();var A=N((function(e,t,n,i,o,l){var a=Object(c["O"])("el-button"),r=Object(c["O"])("el-row"),u=Object(c["O"])("el-table-column"),d=Object(c["O"])("el-input"),s=Object(c["O"])("el-table"),b=Object(c["O"])("el-form-item"),f=Object(c["O"])("el-form"),O=Object(c["O"])("el-dialog"),j=Object(c["O"])("el-main");return Object(c["F"])(),Object(c["k"])(j,null,{default:N((function(){return[Object(c["o"])(r,{justify:"end"},{default:N((function(){return[Object(c["o"])(a,{type:"primary",onClick:l.addClient},{default:N((function(){return[U]})),_:1},8,["onClick"])]})),_:1}),Object(c["o"])(s,{data:l.tableData,style:{width:"100%"}},{default:N((function(){return[Object(c["o"])(u,{prop:"company",label:"Company",width:"180"}),Object(c["o"])(u,{prop:"name",label:"Name",width:"180"}),Object(c["o"])(u,{prop:"email",label:"Email"}),Object(c["o"])(u,{prop:"phone",label:"Phone"}),Object(c["o"])(u,{prop:"address",label:"Address"}),Object(c["o"])(u,{align:"right"},{header:N((function(){return[Object(c["o"])(d,{modelValue:o.search,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.search=e}),size:"mini",placeholder:"Type to search"},null,8,["modelValue"])]})),default:N((function(e){return[Object(c["o"])(a,{icon:"el-icon-edit",circle:"",disabled:l.invoiceCount(e.row.id)>0,onClick:function(t){return l.handleEdit(e.row)}},null,8,["disabled","onClick"]),Object(c["o"])(a,{icon:"el-icon-delete",circle:"",disabled:l.invoiceCount(e.row.id)>0,onClick:function(t){return l.deleteClient(e.row.id)}},null,8,["disabled","onClick"])]})),_:1})]})),_:1},8,["data"]),Object(c["o"])(O,{title:"Client details",modelValue:o.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.dialogVisible=e}),width:"50%"},{footer:N((function(){return[Object(c["o"])("span",P,[Object(c["o"])(a,{onClick:l.cancelEdit},{default:N((function(){return[T]})),_:1},8,["onClick"]),Object(c["o"])(a,{type:"primary",onClick:l.confirmEdit},{default:N((function(){return[E]})),_:1},8,["onClick"])])]})),default:N((function(){return[Object(c["o"])(f,{"label-width":"120px",size:"small"},{default:N((function(){return[Object(c["o"])(b,{label:"Company"},{default:N((function(){return[Object(c["o"])(d,{modelValue:o.editClient.company,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.editClient.company=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(b,{label:"Name"},{default:N((function(){return[Object(c["o"])(d,{modelValue:o.editClient.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.editClient.name=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(b,{label:"Email"},{default:N((function(){return[Object(c["o"])(d,{modelValue:o.editClient.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.editClient.email=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(b,{label:"Phone"},{default:N((function(){return[Object(c["o"])(d,{modelValue:o.editClient.phone,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.editClient.phone=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(b,{label:"Address"},{default:N((function(){return[Object(c["o"])(d,{modelValue:o.editClient.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.editClient.address=e})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}));n("5319"),n("d3b7"),n("25f0"),n("5cc6"),n("acef"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("caad"),n("2532");function z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var $=Object(w["a"])((function e(){Object(V["a"])(this,e),this.id=z(),this.company="",this.name="",this.email="",this.phone="",this.address=""})),B={name:"InvoiceClients",props:{state:Object},data:function(){return{dialogVisible:!1,editClient:!1,search:""}},computed:{clients:function(){return this.state.clients},tableData:function(){var e=this;return this.clients.filter((function(t){return!e.search||JSON.stringify(t).toLowerCase().includes(e.search.toLowerCase())}))}},methods:{addClient:function(){this.editClient=new $,this.dialogVisible=!0},cancelEdit:function(){this.dialogVisible=!1,this.editClient=!1},confirmEdit:function(){this.$emit("saveClient",this.editClient),this.cancelEdit()},handleEdit:function(e){this.editClient=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},invoiceCount:function(e){return this.state.invoices.filter((function(t){return t.client===e})).length},deleteClient:function(e){var t=this;this.$confirm("This will permanently delete the client. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.$emit("deleteClient",e)})).catch((function(){}))}}};B.render=A,B.__scopeId="data-v-bfbacdd4";var J=B,M=(n("a4d3"),n("e01a"),Object(c["hb"])("data-v-311a933e"));Object(c["I"])("data-v-311a933e");var G=Object(c["n"])("New invoice"),L={style:{"margin-right":"30px"}},R={style:{display:"flex"}},W=Object(c["n"])(" Add item "),q={class:"dialog-footer"},H=Object(c["n"])("Cancel"),K=Object(c["n"])("Confirm");Object(c["G"])();var Y=M((function(e,t,n,i,o,l){var a=Object(c["O"])("el-button"),r=Object(c["O"])("el-row"),u=Object(c["O"])("el-table-column"),d=Object(c["O"])("el-input"),s=Object(c["O"])("el-table"),b=Object(c["O"])("el-checkbox"),f=Object(c["O"])("el-form-item"),O=Object(c["O"])("el-date-picker"),j=Object(c["O"])("el-option"),p=Object(c["O"])("el-select"),m=Object(c["O"])("el-button-group"),h=Object(c["O"])("el-input-number"),v=Object(c["O"])("el-form"),g=Object(c["O"])("el-dialog"),y=Object(c["O"])("el-main");return Object(c["F"])(),Object(c["k"])(y,null,{default:M((function(){return[Object(c["o"])(r,{justify:"end"},{default:M((function(){return[Object(c["o"])(a,{type:"primary",onClick:l.addInvoice},{default:M((function(){return[G]})),_:1},8,["onClick"])]})),_:1}),Object(c["o"])(s,{data:l.tableData,"default-sort":{prop:"date",order:"descending"},style:{width:"100%"}},{default:M((function(){return[Object(c["o"])(u,{prop:"description",label:"Description",width:"320"}),Object(c["o"])(u,{label:"Reference",width:"120"},{default:M((function(e){return[Object(c["o"])("a",{href:"",onClick:Object(c["gb"])((function(t){return l.print(e.row)}),["prevent"])},Object(c["S"])(e.row.reference),9,["onClick"])]})),_:1}),Object(c["o"])(u,{label:"Date",prop:"date",width:"180"},{default:M((function(e){return[Object(c["n"])(Object(c["S"])(l.formatDate(e.row.date)),1)]})),_:1}),Object(c["o"])(u,{label:"Client"},{default:M((function(e){return[Object(c["n"])(Object(c["S"])(l.clientDescription(e.row.client)),1)]})),_:1}),Object(c["o"])(u,{label:"Total",width:"100"},{default:M((function(e){return[Object(c["n"])(Object(c["S"])(l.invoiceTotal(e.row)),1)]})),_:1}),Object(c["o"])(u,{prop:"paid",label:"Paid",width:"90",align:"center",filters:[{text:"Paid",value:!0},{text:"Unpaid",value:!1}],"filter-method":l.filterPaid,"filtered-value":[!1]},{default:M((function(e){return[Object(c["o"])(a,{icon:e.row.paid?"el-icon-check":"el-icon-minus",circle:"",onClick:function(t){return e.row.paid=!e.row.paid}},null,8,["icon","onClick"])]})),_:1},8,["filter-method"]),Object(c["o"])(u,{align:"right"},{header:M((function(){return[Object(c["o"])(d,{modelValue:o.search,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.search=e}),size:"mini",placeholder:"Type to search"},null,8,["modelValue"])]})),default:M((function(e){return[Object(c["o"])(a,{icon:"el-icon-edit",circle:"",onClick:function(t){return l.handleEdit(e.row)}},null,8,["onClick"]),Object(c["o"])(a,{icon:"el-icon-delete",circle:"",onClick:function(t){return l.deleteInvoice(e.row.id)}},null,8,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(c["o"])(g,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[9]||(t[9]=function(e){return o.dialogVisible=e}),width:"80%"},{title:M((function(){return[Object(c["o"])("span",L,Object(c["S"])(o.editInvoice.reference),1),Object(c["o"])(b,{label:"Paid",modelValue:o.editInvoice.paid,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.editInvoice.paid=e})},null,8,["modelValue"])]})),footer:M((function(){return[Object(c["o"])("span",q,[Object(c["o"])(a,{onClick:l.cancelEdit},{default:M((function(){return[H]})),_:1},8,["onClick"]),Object(c["o"])(a,{type:"primary",onClick:l.confirmEdit},{default:M((function(){return[K]})),_:1},8,["onClick"])])]})),default:M((function(){return[o.editInvoice?(Object(c["F"])(),Object(c["k"])(v,{key:0,"label-width":"120px",size:"small"},{default:M((function(){return[Object(c["o"])(f,{label:"Description"},{default:M((function(){return[Object(c["o"])(d,{modelValue:o.editInvoice.description,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.editInvoice.description=e})},null,8,["modelValue"])]})),_:1}),Object(c["o"])(f,{label:"Invoice date"},{default:M((function(){return[Object(c["o"])(O,{modelValue:o.editInvoice.date,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.editInvoice.date=e}),type:"date"},null,8,["modelValue"])]})),_:1}),Object(c["o"])(f,{label:"Client"},{default:M((function(){return[Object(c["o"])(p,{modelValue:o.editInvoice.client,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.editInvoice.client=e}),placeholder:"Select"},{default:M((function(){return[(Object(c["F"])(!0),Object(c["k"])(c["b"],null,Object(c["M"])(l.clientOptions,(function(e){return Object(c["F"])(),Object(c["k"])(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["o"])(s,{data:o.editInvoice.items,style:{width:"100%"},"empty-text":"No items to invoice"},{default:M((function(){return[Object(c["o"])(u,{prop:"description"},{header:M((function(){return[Object(c["o"])(b,{modelValue:o.editInvoice.net30,"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.editInvoice.net30=e}),label:"Net30"},null,8,["modelValue"]),Object(c["o"])(b,{modelValue:o.editInvoice.internationalPaymentDetails,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.editInvoice.internationalPaymentDetails=e}),label:"International"},null,8,["modelValue"])]})),default:M((function(e){return[Object(c["o"])(d,{size:"small",modelValue:e.row.description,"onUpdate:modelValue":function(t){return e.row.description=t},placeholder:"Description"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(c["o"])(u,{width:"200"},{header:M((function(){return[Object(c["o"])(m,null,{default:M((function(){return[(Object(c["F"])(),Object(c["k"])(c["b"],null,Object(c["M"])(["£","€","$"],(function(e){return Object(c["o"])(a,{size:"mini",type:o.editInvoice.currency===e?"primary":"default",key:e,onClick:function(t){return o.editInvoice.currency=e}},{default:M((function(){return[Object(c["n"])(Object(c["S"])(e),1)]})),_:2},1032,["type","onClick"])})),64))]})),_:1})]})),default:M((function(e){return[Object(c["o"])("div",R,[Object(c["o"])(h,{size:"small",precision:2,controls:!1,modelValue:e.row.rate,"onUpdate:modelValue":function(t){return e.row.rate=t},placeholder:"Rate",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])])]})),_:1}),Object(c["o"])(u,{label:"Expense",align:"center",width:"100"},{default:M((function(e){return[Object(c["o"])(b,{modelValue:e.row.isExpense,"onUpdate:modelValue":function(t){return e.row.isExpense=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(c["o"])(u,{align:"right",width:"100"},{header:M((function(){return[Object(c["o"])(a,{type:"primary",size:"mini",onClick:t[8]||(t[8]=function(e){return o.editInvoice.items.push({description:"",rate:void 0,isExpense:o.editInvoice.items.length>0})})},{default:M((function(){return[W]})),_:1})]})),default:M((function(e){return[Object(c["o"])(a,{icon:"el-icon-delete",circle:"",onClick:function(t){return o.editInvoice.items.splice(e.$index,1)}},null,8,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})):Object(c["l"])("",!0)]})),_:1},8,["modelValue"])]})),_:1})})),Q=n("b85c");n("fb6a"),n("d81d"),n("7db0"),n("b680"),n("a9e3");function X(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var Z=Object(w["a"])((function e(t){Object(V["a"])(this,e),this.id=X(),this.description="",this.date=(new Date).toISOString().slice(0,10),this.reference=t,this.client="",this.currency="£",this.items=[{description:"",rate:void 0,isExpense:!1}],this.net30=!0,this.internationalPaymentDetails=!1,this.paid=!1})),ee={name:"Invoices",props:{state:Object},data:function(){return{dialogVisible:!1,editInvoice:!1,search:""}},computed:{invoices:function(){return this.state.invoices},tableData:function(){var e=this;return this.invoices.filter((function(t){return!e.search||t.description.toLowerCase().includes(e.search.toLowerCase())}))},clientOptions:function(){return this.state.clients.map((function(e){var t=e.company||e.name;return e.company&&e.name&&(t+=" (".concat(e.name,")")),{value:e.id,label:t}}))}},methods:{getNewReference:function(){var e=new Date,t=e.getUTCDate().toString();1==t.length&&(t="0"+t);var n=(e.getUTCMonth()+1).toString();1==n.length&&(n="0"+n);var i,c=e.getUTCFullYear().toString().substring(2),o="INV"+t+n+c,l=1,a=Object(Q["a"])(this.state.invoices);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.reference.substring(0,o.length)==o&&(l=Math.max(l,parseInt(r.reference.substring(o.length))+1))}}catch(u){a.e(u)}finally{a.f()}return l=l.toString(),1==l.length&&(l="0"+l),o+l},addInvoice:function(){this.editInvoice=new Z(this.getNewReference()),this.dialogVisible=!0},cancelEdit:function(){var e=this;this.dialogVisible=!1,this.$nextTick((function(){e.editInvoice=!1}))},confirmEdit:function(){this.$emit("saveInvoice",this.editInvoice),this.cancelEdit()},handleEdit:function(e){this.editInvoice=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},deleteInvoice:function(e){var t=this;this.$confirm("This will permanently delete the invoice. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.$emit("deleteInvoice",e)})).catch((function(){}))},filterPaid:function(e,t){return t.paid===e},print:function(e){this.$emit("printInvoice",e)},clientDescription:function(e){var t=this.clientOptions.find((function(t){return t.value===e}));return t?t.label:""},formatDate:function(e){return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})},formatCurrency:function(e){return parseInt(e)==parseFloat(e)?e.toString():new Number(e).toFixed(2)},invoiceTotal:function(e){var t=function(e,t){return e+Number(t.rate)},n=e.items.reduce(t,0);return isNaN(n)?"":e.currency+this.formatCurrency(n)}}};ee.render=Y,ee.__scopeId="data-v-311a933e";var te=ee,ne=(n("1276"),Object(c["hb"])("data-v-7650b06c"));Object(c["I"])("data-v-7650b06c");var ie={key:0,class:"page"},ce={style:{display:"flex","font-size":"24pt","margin-bottom":"60pt"}},oe=Object(c["o"])("div",null,"Invoice",-1),le=Object(c["o"])("div",{style:{flex:"1"}},null,-1),ae={style:{display:"flex","font-size":"11pt"}},re=Object(c["o"])("div",null,"From",-1),ue={style:{"font-size":"16pt"}},de={key:0},se={key:2},be=Object(c["o"])("div",{style:{flex:"1"}},null,-1),fe={style:{"text-align":"right"}},Oe=Object(c["o"])("div",null,"To",-1),je={style:{"font-size":"16pt"}},pe={key:0},me={key:1},he={key:3},ve={style:{"font-size":"10pt",width:"50%",margin:"30pt 0"}},ge=Object(c["o"])("td",null,"Invoice reference",-1),ye=Object(c["o"])("td",null,"Invoice date",-1),Ce={key:0},ke=Object(c["o"])("td",null,"Payment due by",-1),we={style:{"font-size":"11pt","border-collapse":"collapse","border-bottom":"1px solid #d9d9d9"}},Ve={style:{padding:"4pt","font-weight":"bold"},colspan:"2"},Ie={class:"item",style:{color:"#999999","font-size":"10pt"}},Se={class:"item",style:{"text-align":"right"}},_e={style:{"align-self":"flex-end",width:"30%","font-size":"11pt","border-collapse":"collapse","border-bottom":"1px solid #d9d9d9"}},De=Object(c["o"])("td",{class:"item"},"Balance due",-1),xe={class:"item",style:{"text-align":"right","font-weight":"bold"}},Fe=Object(c["o"])("div",{style:{flex:"1"}},null,-1),Ne={style:{"padding-top":"40pt"}},Ue={style:{"font-size":"10pt"}},Pe=Object(c["o"])("tr",null,[Object(c["o"])("td",{style:{"padding-top":"20pt"}},"Payment details")],-1),Te=Object(c["o"])("td",{style:{width:"100pt"}},"Name",-1),Ee=Object(c["o"])("td",null,"Sort code",-1),Ae=Object(c["o"])("td",null,"Account number",-1),ze=Object(c["o"])("td",null,"IBAN",-1),$e=Object(c["o"])("td",null,"SWIFT",-1),Be=Object(c["o"])("tr",null,[Object(c["o"])("td",{style:{"padding-top":"20pt"}},"Terms")],-1),Je=Object(c["o"])("tr",null,[Object(c["o"])("td",{colspan:"2"}," Please ensure payment is made within 30 days. Thank you. ")],-1);Object(c["G"])();var Me=ne((function(e,t,n,i,o,l){return n.state.invoices.length>0?(Object(c["F"])(),Object(c["k"])("div",ie,[Object(c["o"])("div",ce,[oe,le,Object(c["o"])("div",null,Object(c["S"])(n.state.settings.businessName),1)]),n.invoice?(Object(c["F"])(),Object(c["k"])(c["b"],{key:0},[Object(c["o"])("div",ae,[Object(c["o"])("div",null,[re,Object(c["o"])("div",ue,Object(c["S"])(n.state.settings.name),1),n.state.settings.email?(Object(c["F"])(),Object(c["k"])("div",de,Object(c["S"])(n.state.settings.email),1)):Object(c["l"])("",!0),n.state.settings.address?(Object(c["F"])(!0),Object(c["k"])(c["b"],{key:1},Object(c["M"])(n.state.settings.address.split(", "),(function(e,t){return Object(c["F"])(),Object(c["k"])("div",{key:"adr_"+t},Object(c["S"])(e),1)})),128)):Object(c["l"])("",!0),n.state.settings.phone?(Object(c["F"])(),Object(c["k"])("div",se,Object(c["S"])(n.state.settings.phone),1)):Object(c["l"])("",!0)]),be,Object(c["o"])("div",fe,[Oe,Object(c["o"])("div",je,Object(c["S"])(l.client.company||l.client.name),1),l.client.company&&l.client.name?(Object(c["F"])(),Object(c["k"])("div",pe,"c/o "+Object(c["S"])(l.client.name),1)):Object(c["l"])("",!0),l.client.email?(Object(c["F"])(),Object(c["k"])("div",me,Object(c["S"])(l.client.email),1)):Object(c["l"])("",!0),l.client.address?(Object(c["F"])(!0),Object(c["k"])(c["b"],{key:2},Object(c["M"])(l.client.address.split(", "),(function(e,t){return Object(c["F"])(),Object(c["k"])("div",{key:"cladr_"+t},Object(c["S"])(e),1)})),128)):Object(c["l"])("",!0),l.client.phone?(Object(c["F"])(),Object(c["k"])("div",he,Object(c["S"])(l.client.phone),1)):Object(c["l"])("",!0)])]),Object(c["o"])("table",ve,[Object(c["o"])("tr",null,[ge,Object(c["o"])("td",null,Object(c["S"])(n.invoice.reference),1)]),Object(c["o"])("tr",null,[ye,Object(c["o"])("td",null,Object(c["S"])(l.formatDate(new Date(n.invoice.date))),1)]),n.invoice.net30?(Object(c["F"])(),Object(c["k"])("tr",Ce,[ke,Object(c["o"])("td",null,Object(c["S"])(l.paymentDueDate),1)])):Object(c["l"])("",!0)]),Object(c["o"])("table",we,[Object(c["o"])("tr",null,[Object(c["o"])("td",Ve,Object(c["S"])(n.invoice.description||"Description"),1)]),(Object(c["F"])(!0),Object(c["k"])(c["b"],null,Object(c["M"])(n.invoice.items,(function(e,t){return Object(c["F"])(),Object(c["k"])("tr",{key:"item"+t},[Object(c["o"])("td",Ie,Object(c["S"])(e.description),1),Object(c["o"])("td",Se,Object(c["S"])(n.invoice.currency)+Object(c["S"])(l.formatCurrency(e.rate)),1)])})),128))]),Object(c["o"])("table",_e,[Object(c["o"])("tr",null,[De,Object(c["o"])("td",xe,Object(c["S"])(l.invoiceTotal),1)])]),Fe,Object(c["o"])("div",Ne,[Object(c["o"])("table",Ue,[Pe,Object(c["o"])("tr",null,[Te,Object(c["o"])("td",null,Object(c["S"])(n.state.settings.paymentDetails.name),1)]),Object(c["o"])("tr",null,[Ee,Object(c["o"])("td",null,Object(c["S"])(n.state.settings.paymentDetails.sortCode),1)]),Object(c["o"])("tr",null,[Ae,Object(c["o"])("td",null,Object(c["S"])(n.state.settings.paymentDetails.accountNumber),1)]),n.invoice.internationalPaymentDetails?(Object(c["F"])(),Object(c["k"])(c["b"],{key:0},[Object(c["o"])("tr",null,[ze,Object(c["o"])("td",null,Object(c["S"])(n.state.settings.paymentDetails.iban),1)]),Object(c["o"])("tr",null,[$e,Object(c["o"])("td",null,Object(c["S"])(n.state.settings.paymentDetails.swift),1)])],64)):Object(c["l"])("",!0),n.invoice.net30?(Object(c["F"])(),Object(c["k"])(c["b"],{key:1},[Be,Je],64)):Object(c["l"])("",!0)])])],64)):Object(c["l"])("",!0)])):Object(c["l"])("",!0)}));function Ge(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var Le=Object(w["a"])((function e(){Object(V["a"])(this,e),this.id=Ge(),this.company="",this.name="",this.email="",this.phone="",this.address=""})),Re={name:"PrintableInvoice",props:{state:Object,invoice:Object},methods:{formatDate:function(e){return e.toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})},formatCurrency:function(e){return isNaN(e)?0:parseInt(e)==parseFloat(e)?e.toString():new Number(e).toFixed(2)}},computed:{client:function(){var e=this;return this.state.clients.find((function(t){return t.id===e.invoice.client}))||new Le},paymentDueDate:function(){var e=new Date(this.invoice.date);return e.setDate(e.getDate()+30),this.formatDate(e)},invoiceTotal:function(){var e=function(e,t){return e+Number(t.rate)},t=this.invoice.items.reduce(e,0);return this.invoice.currency+this.formatCurrency(t)}}};n("5454");Re.render=Me,Re.__scopeId="data-v-7650b06c";var We=Re;window.onafterprint=function(){document.title="Invoices"};var qe=Object(w["a"])((function e(){Object(V["a"])(this,e),this.settings={name:"",businessName:"",address:"",email:"",phone:"",paymentDetails:{name:"",sortCode:"",accountNumber:"",iban:"",swift:""}},this.clients=[],this.invoices=[]})),He={components:{InvoiceSettings:F,InvoiceClients:J,Invoices:te,PrintableInvoice:We},data:function(){return{isSignedIn:!1,state:new qe,navSection:"invoices",printInvoice:null}},watch:{state:{deep:!0,handler:function(){this.save()}}},methods:{copyData:function(){var e=this;navigator.clipboard.writeText(JSON.stringify(this.state)).then((function(){e.$message.info("All data copied to clipboard")}),(function(t){e.$message.error(t)}))},saveClient:function(e){var t=this.state.clients.findIndex((function(t){return t.id===e.id}));-1===t?this.state.clients.push(e):this.state.clients[t]=e},saveInvoice:function(e){var t=this.state.invoices.findIndex((function(t){return t.id===e.id}));-1===t?this.state.invoices.push(e):this.state.invoices[t]=e},deleteClient:function(e){var t=this.state.clients.findIndex((function(t){return t.id===e}));-1!=t&&this.state.clients.splice(t,1)},deleteInvoice:function(e){var t=this.state.invoices.findIndex((function(t){return t.id===e}));-1!=t&&this.state.invoices.splice(t,1)},authorise:function(){gapi.load("client:auth2",this.initClient)},initClient:function(){var e=this,t="989846409282-j3lkg93rcn1047hu2hh0ko5pg8rst3t3.apps.googleusercontent.com",n="https://www.googleapis.com/auth/drive.appdata";gapi.client.init({client_id:t,scope:n}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(e.updateSigninStatus),e.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())}),(function(t){e.$message.error(JSON.stringify(t,null,2))}))},updateSigninStatus:function(e){this.isSignedIn=e,e?this.read():this.state=new qe},loadDriveAPI:function(){return gapi.client.load("drive","v3")},getFileId:function(){var e=this;return gapi.client.drive.files.list({q:'name="invoices.json"',spaces:"appDataFolder",fields:"files(id)"}).then((function(t){return 0==t.result.files.length?e.create():t.result.files[0].id}))},prepare:function(){return this.loadDriveAPI().then(this.getFileId)},create:function(){return gapi.client.drive.files.create({fields:"id",resource:{name:"invoices.json",parents:["appDataFolder"]}}).then((function(e){return e.result.id}))},read:function(){var e=this;return this.prepare().then((function(t){return gapi.client.drive.files.get({fileId:t,alt:"media"}).then((function(t){t.body.length>0&&(e.state=JSON.parse(t.body))}))}))},save:function(){var e=this;this.isSignedIn&&this.prepare().then((function(t){return gapi.client.request({path:"/upload/drive/v3/files/"+t,method:"PATCH",params:{uploadType:"media"},body:JSON.stringify(e.state)})}))},signin:function(){gapi.auth2.getAuthInstance().signIn()},signout:function(){gapi.auth2.getAuthInstance().signOut()},print:function(e){this.printInvoice=e,document.title=e.reference,this.$nextTick((function(){window.print()}))}},mounted:function(){window.addEventListener("google-loaded",this.authorise)}};n("03c0");He.render=k;var Ke=He;Object(c["j"])(Ke).use(i["a"]).mount("#app")},c632:function(e,t,n){"use strict";n("e3b9")},cf19:function(e,t,n){},d437:function(e,t,n){},e3b9:function(e,t,n){}});
//# sourceMappingURL=app.39b9cae8.js.map